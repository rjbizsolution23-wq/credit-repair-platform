<div class="release-notes-container">
  <!-- Header Section -->
  <div class="header-section">
    <h1 class="page-title">Release Notes</h1>
    <p class="page-subtitle">
      Stay up to date with the latest features, improvements, and fixes in the Rick Jefferson Solutions platform.
    </p>
  </div>

  <!-- Search and Filter Section -->
  <div class="search-filter-section">
    <div class="search-box">
      <i class="feather-search"></i>
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearch()"
        placeholder="Search releases..."
        class="search-input"
      >
      <button *ngIf="searchTerm" (click)="clearSearch()" class="clear-search">
        <i class="feather-x"></i>
      </button>
    </div>

    <div class="filter-tabs">
      <button
        *ngFor="let type of releaseTypes"
        (click)="selectFilter(type.id)"
        [class]="'filter-btn ' + (filterType === type.id ? 'active' : '')"
      >
        {{ type.name }}
        <span class="count">{{ type.count }}</span>
      </button>
    </div>
  </div>

  <div class="content-layout">
    <!-- Release List Sidebar -->
    <div class="releases-sidebar">
      <h3>Releases</h3>
      <div class="releases-list">
        <div
          class="release-item"
          *ngFor="let release of filteredReleases"
          (click)="selectRelease(release)"
          [class.selected]="selectedVersion?.version === release.version"
        >
          <div class="release-header">
            <div class="version-info">
              <span class="version">v{{ release.version }}</span>
              <span class="type-badge" [class]="getTypeBadgeClass(release.type)">
                {{ release.type }}
              </span>
            </div>
            <span class="release-date">{{ formatDate(release.releaseDate) }}</span>
          </div>
          <h4 class="release-title">{{ release.title }}</h4>
          <div class="release-meta">
            <span class="downloads">
              <i class="feather-download"></i>
              {{ formatDownloads(release.downloads) }}
            </span>
            <span class="stability" *ngIf="release.isStable">
              <i class="feather-check-circle"></i>
              Stable
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Release Details -->
    <div class="release-details" *ngIf="selectedVersion">
      <div class="details-header">
        <div class="version-header">
          <h2>Version {{ selectedVersion.version }}</h2>
          <div class="header-badges">
            <span class="type-badge" [class]="getTypeBadgeClass(selectedVersion.type)">
              {{ selectedVersion.type }} release
            </span>
            <span class="stability-badge" *ngIf="selectedVersion.isStable">
              <i class="feather-check-circle"></i>
              Stable
            </span>
          </div>
        </div>
        <div class="release-info">
          <span class="release-date">
            <i class="feather-calendar"></i>
            Released {{ formatDate(selectedVersion.releaseDate) }}
          </span>
          <span class="downloads">
            <i class="feather-download"></i>
            {{ formatDownloads(selectedVersion.downloads) }} downloads
          </span>
        </div>
      </div>

      <div class="details-content">
        <!-- Title and Description -->
        <div class="release-overview">
          <h3>{{ selectedVersion.title }}</h3>
          <p class="description">{{ selectedVersion.description }}</p>
        </div>

        <!-- Highlights -->
        <div class="highlights-section" *ngIf="selectedVersion.highlights?.length > 0">
          <h4>Key Highlights</h4>
          <ul class="highlights-list">
            <li *ngFor="let highlight of selectedVersion.highlights">
              <i class="feather-star"></i>
              <span>{{ highlight }}</span>
            </li>
          </ul>
        </div>

        <!-- Changes Sections -->
        <div class="changes-sections">
          <!-- New Features -->
          <div class="change-section" *ngIf="selectedVersion.changes.new?.length > 0">
            <h4 class="section-title new">
              <i class="feather-plus-circle"></i>
              New Features
            </h4>
            <ul class="changes-list">
              <li *ngFor="let item of selectedVersion.changes.new">
                <i class="feather-plus"></i>
                <span>{{ item }}</span>
              </li>
            </ul>
          </div>

          <!-- Improvements -->
          <div class="change-section" *ngIf="selectedVersion.changes.improved?.length > 0">
            <h4 class="section-title improved">
              <i class="feather-trending-up"></i>
              Improvements
            </h4>
            <ul class="changes-list">
              <li *ngFor="let item of selectedVersion.changes.improved">
                <i class="feather-arrow-up"></i>
                <span>{{ item }}</span>
              </li>
            </ul>
          </div>

          <!-- Bug Fixes -->
          <div class="change-section" *ngIf="selectedVersion.changes.fixed?.length > 0">
            <h4 class="section-title fixed">
              <i class="feather-tool"></i>
              Bug Fixes
            </h4>
            <ul class="changes-list">
              <li *ngFor="let item of selectedVersion.changes.fixed">
                <i class="feather-check"></i>
                <span>{{ item }}</span>
              </li>
            </ul>
          </div>

          <!-- Breaking Changes -->
          <div class="change-section breaking" *ngIf="selectedVersion.changes.breaking?.length > 0">
            <h4 class="section-title breaking">
              <i class="feather-alert-triangle"></i>
              Breaking Changes
            </h4>
            <div class="breaking-warning">
              <i class="feather-alert-triangle"></i>
              <span>These changes may require action on your part</span>
            </div>
            <ul class="changes-list">
              <li *ngFor="let item of selectedVersion.changes.breaking">
                <i class="feather-alert-circle"></i>
                <span>{{ item }}</span>
              </li>
            </ul>
          </div>
        </div>

        <!-- Migration Information -->
        <div class="migration-section" *ngIf="selectedVersion.migration">
          <h4>
            <i class="feather-refresh-cw"></i>
            Migration Information
          </h4>
          <div class="migration-info">
            <p>{{ selectedVersion.migration }}</p>
          </div>
        </div>

        <!-- Download Section -->
        <div class="download-section">
          <button 
            (click)="downloadRelease(selectedVersion.version)" 
            class="btn btn-primary"
          >
            <i class="feather-download"></i>
            Download v{{ selectedVersion.version }}
          </button>
          <p class="download-note">
            This version has been downloaded {{ formatDownloads(selectedVersion.downloads) }} times
          </p>
        </div>
      </div>
    </div>

    <!-- No Selection State -->
    <div class="no-selection" *ngIf="!selectedVersion">
      <i class="feather-file-text"></i>
      <h3>Select a Release</h3>
      <p>Choose a release from the sidebar to view detailed release notes and changelog.</p>
    </div>
  </div>

  <!-- Subscription Section -->
  <div class="subscription-section">
    <div class="subscription-card">
      <div class="subscription-icon">
        <i class="feather-bell"></i>
      </div>
      <div class="subscription-content">
        <h3>Stay Updated</h3>
        <p>Get notified about new releases and important updates to the Rick Jefferson Solutions platform.</p>
        <div class="subscription-actions">
          <button class="btn btn-outline">
            <i class="feather-mail"></i>
            Subscribe to Updates
          </button>
          <button class="btn btn-outline">
            <i class="feather-rss"></i>
            RSS Feed
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Support Section -->
  <div class="support-section">
    <div class="support-card">
      <i class="feather-help-circle"></i>
      <div class="support-content">
        <h3>Need Help with Updates?</h3>
        <p>If you encounter any issues after updating, our support team is here to help.</p>
        <a routerLink="/help/contact-support" class="support-link">Contact Support</a>
      </div>
    </div>
  </div>
</div>